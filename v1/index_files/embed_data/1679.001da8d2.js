"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1679"],{89043:function(e,n,t){t.d(n,{Z:()=>r});let r={container:"container-PNh5cP",containerBulwark:"containerBulwark-Y0wz4B",noPodcasts:"noPodcasts-reia2s"}},62126:function(e,n,t){t.d(n,{m:()=>ee});var r=t(16584),i=t(30396),l=t(80569),a=t.n(l),o=t(95441),c=t(15771),d=t(19081),u=t(6490),s=t(58175);let p=e=>{let{isOpen:n,onContinue:t}=e,{iString:l}=(0,o.M1)(),[a,p]=(0,i.eJ)(!1);return(0,r.BX)(u.u_,{isOpen:n,children:[(0,r.tZ)(u.xB,{title:l("Switch to Bitcoin"),showClose:!1}),(0,r.tZ)(u.fe,{children:(0,r.BX)(d.tu,{gap:24,children:[(0,r.BX)(d.tu,{gap:16,children:[(0,r.tZ)(s.xv.B4,{translated:!0,children:"Switching to Bitcoin will end your auto-renewing credit card payments."}),(0,r.BX)(s.xv.B4,{translated:!0,children:["Please note that Substack cannot process refunds or auto-renewals for Bitcoin payments. You will now be sent to"," ",(0,r.tZ)("a",{href:"https://opennode.com",target:"_blank",rel:"noopener",children:"OpenNode"})," ","to complete your checkout."]})]}),(0,r.tZ)(c.zx,{onClick:()=>{p(!0),t()},disabled:a,children:l("Continue")})]})})]})};var h=t(25469),m=t(17876),g=t(94184),v=t.n(g),f=t(51776);let b="themed-qm5g5y",Z=e=>{let{placeholder:n,maxLength:t,value:i,symbol:l,themed:a=!1,onChange:o}=e;return(0,r.BX)(d.gq,{alignItems:"center",justifyContent:"start",className:v()("inputContainer-JJXl4U",{[b]:a}),children:[(0,r.tZ)(s.xv.B3,{as:"span",color:a?"pub-secondary-text":"secondary",weight:"semibold",className:"currencyInput-n4aG03",children:l}),(0,r.tZ)(f.oi,{name:"Confirm Founding Price","aria-label":"Confirm founding price",value:i,placeholder:n,maxLength:t,onChange:e=>o(e.currentTarget.value),onInput:e=>o(e.currentTarget.value),className:v()("inputField-ZlLLCs",{[b]:a})})]})};var y=t(68833),_=t(84864);let w=e=>{let{currency:n,isValid:t,newUpgradeModal:l,planName:a,price:c,setValidationState:u}=e,[p,g]=(0,i.eJ)(""),v=parseInt(c);(0,i.d4)(()=>((0,y.j)(y.FP.FOUNDING_PRICE_CONFIRMATION_REQUIRED,{price:c,source:"upgrade modal"}),()=>{t||(0,y.j)(y.FP.FOUNDING_PRICE_CONFIRMATION_DISMISSED,{price:c,source:"upgrade modal"})}),[]);let{iString:f}=(0,o.M1)(),b=(0,_.isZeroDecimalCurrency)(n)?1:100;return(0,r.BX)(d.tu,{font:l?"text":void 0,gap:8,paddingTop:8*!l,borderTop:l?void 0:"detail",alignItems:"start",justifyContent:"start",children:[(0,r.BX)(s.xv,{translated:!0,as:"p",size:l?14:17,color:"secondary",children:["Please confirm you want to pay"," ",(0,r.tZ)(s.xv,{as:"span",color:"primary",weight:"semibold",children:I18N.p(v?(0,_.centsToPriceString)(v*b,n):c)})," ","per year for a ",I18N.p(null!=a?a:f("Founding Member"))," subscription by typing the price below."]}),(0,r.BX)(d.gq,{alignItems:"center",justifyContent:"start",gap:8,style:{width:"100%"},children:[(0,r.tZ)(Z,{placeholder:c,symbol:(0,_.currencySymbol)(n),maxLength:c.length,value:p,themed:!1,onChange:e=>{e===c?(u(!0),g(e)):e!==p&&(u(!1),g(e))}}),t?(0,r.tZ)(h.Z,{size:24,style:{color:"var(--color-accent-fg-green)"}}):(0,r.tZ)(m.Z,{size:24,style:{color:"var(--color-accent-fg-red)"}})]})]})};var B=t(89734),x=t.n(B),C=t(58865),N=t(7409),I=t(99282),S=t(64515);let X=e=>(0,r.tZ)(S.l,(0,I._)((0,N._)({},e),{name:"WarningIcon",svgParams:{viewBox:"-2 -2 18 18"},children:(0,r.tZ)("path",{d:"M8 0C3.582 0 0 3.582 0 8s3.582 8 8 8 8-3.582 8-8S12.418 0 8 0zM9 12H7v-2h2V12zM9 8H7V4h2V8z"})}));var k=t(87077),P=t(31582);let F={outlineWrapper:"outlineWrapper-MqmfKS",outlineWrapperWithWarning:"outlineWrapperWithWarning-x5ALXu",warningContainer:"warningContainer-lQlVcA",outlineWrapperSelected:"outlineWrapperSelected-KXkgz5",amountInput:"amountInput-pcn7kh",amountInputDeselected:"amountInputDeselected-W75Nrd"};function M(){let e=(0,C._)([" per ",""]);return M=function(){return e},e}function A(){let e=(0,C._)(["Amount must be greater than ",""]);return A=function(){return e},e}let U=e=>{var n;let{amount:t,currency:l,isSelected:a,outlineOnSelect:c,plan:d,usePer:u,showDuration:s=!0,disableInput:p=!1,className:h,disableWarning:m,onChangeAmount:g,truncateInterval:f=!1}=e,b=(0,i.sO)(null),[Z,y]=(0,i.eJ)(!1),w=(0,i.I4)(e=>{g(e.toString().replace(/[^\d.]/g,""))},[g]);l||(l=d.currency),(0,i.d4)(()=>{let e=(0,P.vq)(d,l);y(!!(!m&&e&&null!==t&&l&&parseFloat(Number((0,_.isZeroDecimalCurrency)(l)?t:100*Number(t)).toFixed(2))<e&&a))},[t,l,m,a,d]),(0,i.bt)(()=>{setTimeout(()=>{b.current&&(b.current.style.width="1px",b.current.style.width="".concat(b.current.scrollWidth,"px"),b.current.scrollLeft=0)},0)},[t,b]),(0,i.d4)(()=>{a&&(b.current.focus(),b.current.select())},[b,a]);let{iTemplate:B,iString:x}=(0,o.M1)(),C=f&&"year"===d.interval?"yr":f&&"month"===d.interval?"mo":d.interval;return(0,r.BX)("span",{className:v()(F.outlineWrapper,h,{[F.outlineWrapperSelected]:c&&a,[F.outlineWrapperWithWarning]:Z}),children:[(0,_.centsToPriceString)(100,l).replace("1",""),(0,r.tZ)("input",{disabled:p,ref:b,className:v()(F.amountInput,{[F.amountInputDeselected]:!a}),id:"money-variable-amount",type:"text","aria-label":"founding member amount",autoComplete:"off",value:"string"==typeof t?t:d.amount/100,onKeyDown:e=>{"ArrowUp"===e.key?(w(Number(t||d.amount/100)+5),setTimeout(()=>{b.current.selectionStart=b.current.selectionEnd=b.current.value.length},0)):"ArrowDown"===e.key&&(!t||Number(t)>=5)&&(w(Number(t||d.amount/100)-5),setTimeout(()=>{b.current.selectionStart=b.current.selectionEnd=b.current.value.length},0))},onInput:e=>{w(e.target.value)}}),(0,r.tZ)("input",{name:"amount",type:"hidden",value:"string"==typeof t?100*(Number(t)||0):d.amount}),s&&"forever"!==d.interval&&(u?B(M(),x(C)):"/".concat(x(C))),Z&&(0,r.tZ)("div",{className:F.warningContainer,children:(0,r.tZ)(k.u,{text:B(A(),(0,_.centsToPriceString)(null!==(n=(0,P.vq)(d,l))&&void 0!==n?n:0,l)),children:(0,r.tZ)(X,{stroke:"white",height:20,fill:"red",strokeWidth:1})})})]})};var E=t(43570);let D=e=>{let{currency:n,foundingAmount:t,foundingName:i,isSelected:l,isCurrent:a,plan:c,onChangeAmount:u}=e,{iString:p}=(0,o.M1)();return(0,r.BX)(d.gq,{alignItems:"center",flex:"grow",gap:16,justifyContent:"space-between",children:[(0,r.tZ)(s.xv.B4,{weight:l?"semibold":"regular",children:(0,r.BX)(d.tu,{children:[(0,r.tZ)("div",{children:i}),(0,r.tZ)(U,{amount:t?t.toString():"",currency:n,isSelected:l,plan:c,usePer:!0,onChangeAmount:e=>{u(Number(e))}})]})}),a&&(0,r.tZ)(E.Vp,{priority:"primary",theme:"default",children:p("Current")})]})};var z=t(10656);let L=e=>{let{currency:n,plan:t,isCurrent:i,isSelected:l,language:a}=e,{iString:c}=(0,o.M1)();return(0,r.BX)(d.gq,{alignItems:"center",flex:"grow",gap:8,justifyContent:"space-between",children:[(0,r.tZ)(s.xv.B4,{weight:l?"semibold":"regular",children:(0,z.tS)(t,{currency:n,noTrial:!0,recurring:!0,language:a})}),i&&(0,r.tZ)(E.Vp,{priority:"primary",theme:"default",children:c("current")})]})};var T=t(57640),O=t(51699);let W=e=>{let{currency:n,foundingAmount:t,foundingName:i,isCurrent:l,language:a,plan:o,isSelected:c,onChangePlan:u,onChangeFoundingAmount:s}=e;return(0,r.BX)(d.gq,{alignItems:"center",as:"label",border:c?"accent":"detail-themed",gap:8,padding:16,radius:"sm",children:[(0,r.tZ)(T.Y,{checked:c,name:"plan",value:o.id,onClick:e=>{u({planId:e.target.value})}}),(0,O.F)({plan:o})?(0,r.tZ)(D,{currency:n,foundingAmount:t,foundingName:i,isCurrent:l,isSelected:c,plan:o,onChangeAmount:s}):(0,r.tZ)(L,{currency:n,plan:o,isCurrent:l,isSelected:c,language:a})]})},q=e=>{let{currency:n,foundingAmount:t,foundingName:i,getIsCurrentPlan:l,language:a,plans:o,selectedPlanId:c,onChangeFoundingAmount:u,onChangePlan:s}=e,p=x()(o,"amount").filter(e=>{var n;return!(null===(n=e.metadata)||void 0===n?void 0:n.bitcoin)}),h=null!=c?c:"";return(0,r.tZ)(d.tu,{gap:8,children:p.map(e=>(0,r.tZ)(W,{currency:n,foundingAmount:t,foundingName:i,isCurrent:l(e),isSelected:e.id===h,language:a,plan:e,onChangePlan:s,onChangeFoundingAmount:u}))})};var V=t(61254),j=t(24791);let R=e=>{let{currency:n,foundingAmount:t,foundingAmountLessThanMinimum:i,foundingName:l,hasChanges:a,sub:c,isNewPlanClassicFounding:u,newPlan:p}=e,{iString:h,language:m}=(0,o.M1)(),g=(0,_.isZeroDecimalCurrency)(n)?1:100,v=a&&p&&(!u||!i),f=v?u?"".concat((0,_.centsToPriceString)((null!=t?t:0)*g,n)," ").concat(h("per year")):(0,z.tS)(p,{language:m,currency:n}):h("N/A");return(0,r.BX)(d.tu,{gap:24,children:[(0,r.tZ)(s.xv.H4,{translated:!0,children:"Summary"}),(0,r.BX)("div",{className:"table-tzqeVd",children:[c.plan&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv.B4,{color:"secondary",translated:!0,children:"Current plan"}),(0,r.BX)(d.tu,{"data-testid":"upgrade-summary-current-plan",gap:4,children:[(0,r.tZ)(s.xv.B4,{color:"secondary",align:"right",children:(0,j.sM)({sub:c})?l:H({plan:c.plan,language:m,currency:n})}),(0,j.sM)({sub:c})&&(0,r.tZ)(s.xv.B4,{color:"secondary",align:"right",children:(0,z.tS)(c.plan,{language:m,currency:n})})]})]}),(0,r.tZ)(s.xv.B4,{translated:!0,children:"New plan"}),(0,r.BX)(d.tu,{"data-testid":"upgrade-summary-new-plan",gap:4,children:[(0,r.tZ)(s.xv.B4,{align:"right",weight:v?"semibold":"regular",children:v?H({plan:p,language:m,currency:n}):h("N/A")}),u&&v&&(0,r.tZ)(s.xv.B4,{align:"right",weight:"semibold",children:f})]}),(0,r.tZ)(V.iz,{className:"table-divider-O5XQ7c"}),(0,r.tZ)(s.xv.B4,{translated:!0,children:"Total"}),(0,r.tZ)(s.xv.B4,{"data-testid":"upgrade-summary-total",align:"right",weight:v?"semibold":"regular",children:f})]})]})},H=e=>{var n,t,r;let{plan:i,language:l,currency:a}=e;return(null===(n=i.metadata)||void 0===n?void 0:n.founding)==="yes"?null!==(r=null===(t=i.metadata)||void 0===t?void 0:t.short_description)&&void 0!==r?r:"Founding membership":(0,z.tS)(i,{language:l,currency:a})};var J=t(98914),Y=t(26111);let G={"left-column":"left-column-RH66AP"},K=e=>{var n,t;let{pub:r,sub:i}=e,l=(0,j.MO)(r);if(!l)return 0;let a=(0,P.$e)(l,i.currency),o=i.is_founding&&i.plan&&(0,j.sM)({sub:i})&&l.interval===i.plan.interval?(0,P.$e)(i.plan,i.currency):null,c=(0,_.isZeroDecimalCurrency)(null!==(n=i.currency)&&void 0!==n?n:"usd")?1:100;return(null!==(t=null!=o?o:a)&&void 0!==t?t:0)/c},Q=e=>{let{pub:n,sub:t}=e,r=null==t?void 0:t.plan;if(!r)return null;if((0,j.sM)({sub:t})){let e=(0,j.MO)(n);if(e&&e.interval===r.interval)return e}return r},$=e=>{var n,t;let{plan:r,sub:i}=e;return!!r&&!!i.plan&&(!!(r.id===i.plan.id||(0,j.sM)({sub:i})&&(0,O.F)({plan:r})&&r.interval===i.plan.interval)||r.amount===i.plan.amount&&r.interval===i.plan.interval&&r.currency===i.plan.currency&&(null===(n=r.metadata)||void 0===n?void 0:n.bitcoin)===(null===(t=i.plan.metadata)||void 0===t?void 0:t.bitcoin))},ee=e=>{var n,t,l;let{isOpen:h,preselectedPlan:m,pub:g,sub:v,onClose:f}=e,{iString:b,language:Z}=(0,o.M1)(),[B,x]=(0,i.eJ)(!1),[C,N]=(0,i.eJ)(Q({pub:g,sub:v})),[I,S]=(0,i.eJ)(K({pub:g,sub:v})),[X,k]=(0,i.eJ)(!1),[P,F]=(0,i.eJ)(!1),[M,A]=(0,i.eJ)(null),U=(0,i.Ye)(()=>(g.plans||[]).filter(e=>{if(g.disable_annual_subscriptions){var n;return"year"!==e.interval||(null===(n=e.metadata)||void 0===n?void 0:n.founding)}return!g.disable_monthly_subscriptions||"month"!==e.interval}),[g.plans]),E=U.some(e=>{var n;return null===(n=e.metadata)||void 0===n?void 0:n.bitcoin}),D=null!==(n=(0,j.H$)(g))&&void 0!==n?n:"",z=null!==(t=v.currency)&&void 0!==t?t:"usd",L=(0,_.isZeroDecimalCurrency)(z),T=L?1:100,W=C&&!$({plan:C,sub:v}),V=I!==K({pub:g,sub:v}),H=W||V,ee=parseFloat((I*T).toFixed(2))<(null!==(l=(0,j.rm)({pub:g,currency:z}))&&void 0!==l?l:0),en=C&&(0,O.F)({plan:C}),et=en&&V&&(null!=I?I:0)>=(L?1e6:1e4),er=!!(B||!H||et&&!X||en&&ee||M);(0,i.d4)(()=>{if(h&&m){if("yearly"===m){let e=U.find(e=>"year"===e.interval&&1===e.interval_count);e&&N(e)}else if("founding"===m){let e=(0,j.MO)(g);e&&N(e)}}},[h,U,m,g]);let ei=(0,i.I4)(()=>{N(Q({pub:g,sub:v})),S(K({pub:g,sub:v}))},[g,v]),el=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&ei(),(0,y.j)(y.FP.UPGRADE_PLAN_MODAL_DISMISSED,{plan:C}),f()},ea=async function(){let{quantity:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!C)return;x(!0);let n=I&&en?I*T:void 0;if(et&&!X){x(!1);return}try{var t;let r=await a().post("/api/v1/subscription/change_plan").send({planId:C.id,foundingAmount:n,quantity:e,token:(0,Y.x)(window._preloads.original_url,"token")});(null===(t=r.body)||void 0===t?void 0:t.opennodePaymentUrl)?setTimeout(()=>{window.location.href=r.body.opennodePaymentUrl},30):(x(!1),alert(b("Success! You've changed your plan")),(0,y.j)(y.FP.UPGRADE_PLAN_MODAL_SUBMITTED,{plan:C,amount:null!=n?n:null}),(0,Y.x)("redirect")?(0,J.uX)((0,Y.x)("redirect"),{local_navigation:!1}):((0,J.iO)("change_plan"),window.location.reload()))}catch(e){x(!1),A((0,J.zx)(e))}},eo=e=>{k(e),e&&(0,y.j)(y.FP.FOUNDING_PRICE_CONFIRMATION_SUBMITTED,{price:I,source:"upgrade modal"})};return U.length?(0,r.BX)("div",{children:[E&&(0,r.tZ)(p,{isOpen:P,onContinue:()=>ea()}),(0,r.tZ)(u.u_,{isOpen:h,testId:"upgrade-plan-modal",width:700,onClose:B?()=>{}:f,fullscreenMobile:!0,children:(0,r.BX)(d.gq,{direction:{desktop:"row",mobile:"column"},children:[(0,r.BX)(d.tu,{className:G["left-column"],gap:16,padding:24,children:[(0,r.tZ)(s.xv.H3,{translated:!0,children:"Change Plan"}),(0,r.tZ)(q,{currency:z,foundingAmount:I,foundingName:D,getIsCurrentPlan:e=>$({plan:e,sub:v}),language:Z,plans:U,selectedPlanId:null==C?void 0:C.id,onChangeFoundingAmount:e=>{S(e),A(null),k(!1)},onChangePlan:e=>{let{planId:n}=e,{plans:t}=g,r=null==t?void 0:t.find(e=>e.id===n);r&&((0,y.j)(y.FP.UPGRADE_PLAN_MODAL_PLAN_CHANGED,{oldPlan:C,newPlan:r}),N(r),A(null))}})]}),(0,r.BX)(d.tu,{padding:24,flex:"grow",gap:80,children:[(0,r.BX)(d.tu,{flex:"grow",gap:40,children:[(0,r.tZ)(R,{currency:z,foundingAmount:I,foundingAmountLessThanMinimum:ee,foundingName:D,hasChanges:H,isNewPlanClassicFounding:!!en,newPlan:C,sub:v}),et&&(0,r.tZ)(w,{price:I?I.toString():"",isValid:X,planName:D,currency:z,setValidationState:e=>eo(e),newUpgradeModal:!0}),M&&(0,r.tZ)(s.xv,{color:"error",size:14,font:"text",children:M})]}),(0,r.BX)(d.gq,{gap:12,justifyContent:"end",children:[(0,r.tZ)(c.zx,{priority:"secondary",onClick:()=>el(),disabled:B,children:b("Cancel")}),(0,r.tZ)(c.zx,{priority:"primary",className:"confirm",onClick:()=>{var e;(null==C?void 0:null===(e=C.metadata)||void 0===e?void 0:e.bitcoin)?(el(!1),F(!0)):ea()},disabled:er,children:B?b("Loading..."):b("Change plan")})]})]})]})})]}):null}},95031:function(e,n,t){t.d(n,{_:()=>a});var r=t(16584),i=t(75744),l=t(58175);let a=e=>{let{hideTerms:n,pub:t,showIntrinioAttrib:a}=e,o=t.has_custom_tos||t.has_custom_privacy,c=(0,r.BX)("div",{className:"footer-copyright-blurb",children:["\xa9 ",new Date().getFullYear()," ",t&&t.copyright||"Substack Inc"]}),d=(0,r.BX)(r.HY,{children:[a&&(0,r.BX)(l.xv,{translated:!0,as:"div",className:"footer-copyright-blurb",children:["Market data by ",(0,r.tZ)("a",{href:"https://intrinio.com/",children:"Intrinio"})]}),!n&&(0,r.tZ)("div",{className:"footer-terms-blurb",children:(0,r.tZ)(i.nO,{publication:t})})]});return o?(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:"footer-blurbs",children:[c,!n&&(0,r.tZ)("div",{className:"footer-terms-blurb",children:(0,r.tZ)(i.Ug,{pub:t})})]}),(0,r.BX)("div",{className:"footer-blurbs",children:[(0,r.tZ)("div",{className:"footer-copyright-blurb",children:"Substack"}),d]})]}):(0,r.BX)("div",{className:"footer-blurbs",children:[c,d]})}},34288:function(e,n,t){t.d(n,{$:()=>b});var r=t(16584),i=t(98661);t(30396);var l=t(94184),a=t.n(l),o=t(95031),c=t(55438);t(97742);var d=t(58319),u=t(95441),s=t(45261),p=t(68833),h=t(58175),m=t(60308);t(6911);var g=t(81821),v=t(47929),f=t(8525);let b=(0,i.memo)(e=>{let{publication:n,user:t,path:i,hideTerms:l,showIntrinioAttrib:b}=e,{iString:Z}=(0,u.M1)();void 0===l&&(l=!1);let y=(0,s.Tf)(),_=(0,g.tq)(),w=(0,g.s)(),B=(0,g.Dt)(),x=t&&!t.reader_installed_at,C=_&&(w||B)&&x;return(0,r.BX)("div",{className:"footer-wrap publication-footer",children:[(0,r.tZ)(d.Z,{onVisible:()=>{var e;(0,p.j)(p.FP.PUBLICATION_FOOTER_SEEN,{publication_id:null==n?void 0:n.id,user_id:null==t?void 0:t.id,source:(e=i)?"/"===e?"pub-homepage":e.startsWith("/p")?"pub-post":e:"unknown"})}}),(0,r.tZ)("div",{className:a()("footer",{"themed-background":y}),children:(0,r.BX)("div",{className:"container",children:[(0,r.tZ)(o._,{hideTerms:l,pub:n,showIntrinioAttrib:null!=b&&b}),(0,r.BX)("div",{className:"footer-buttons",children:[(0,r.BX)("a",{className:a()("footer-substack-cta","start-publishing",C&&"app-upsell"),native:!0,href:(null==t?void 0:t.has_publication)?"".concat((0,m.SVA)({subdomain:"your"}),"/publish"):"".concat((0,m.ZJn)(),"/signup?").concat((0,m.Y$Q)({utm_source:v.b3.substack,utm_medium:v.lP.web,utm_content:v.fZ.footer})),children:[(0,r.tZ)(c.Z,{})," ",Z("Start writing")]}),!C&&(0,r.tZ)("a",{className:"footer-substack-cta get-the-app no-icon",native:!0,href:(0,m.D4e)({utm_campaign:v.VX.appMarketing,utm_content:v.fZ.webFooterButton}),children:Z("Get the app")}),C&&w&&(0,r.tZ)("a",{className:f.Z.appBadge,href:(0,m.D4e)({utm_campaign:v.VX.appMarketing,utm_content:v.fZ.webFooterButton,force:"ios"}),children:(0,r.tZ)("img",{className:"app-upsell",src:(0,m.zF4)("/img/app_page/app-store.png",320)})}),C&&B&&(0,r.tZ)("a",{className:f.Z.appBadge,href:(0,m.D4e)({utm_campaign:v.VX.appMarketing,utm_content:v.fZ.webFooterButton,force:"android"}),children:(0,r.tZ)("img",{className:"app-upsell",src:(0,m.zF4)("/img/app_page/google-play.png",320)})})]}),(0,r.BX)(h.xv,{translated:!0,as:"div",className:"footer-slogan-blurb",children:[(0,r.tZ)("a",{href:"".concat((0,m.ZJn)()),native:!0,children:"Substack"})," ","is the home for great culture"]})]})})]})})},13561:function(e,n,t){t.d(n,{A:()=>f});var r=t(16584),i=t(6400),l=t(19425),a=t(12048),o=t(94184),c=t.n(o),d=t(50308),u=t.n(d),s=t(71375),p=t(347),h=t(15771),m=t(19081),g=t(27190),v=t(88e3);let f=e=>{let{children:n,disableCloseOnBackdropClick:t=!1,fullscreenMobile:o,hideCloseButton:d,initialFocus:f,isOpen:b,maxFullscreenMobile:Z,overflow:y,testId:_="modal",width:w=660,onClose:B=()=>void 0,onEscape:x}=e;return(0,r.tZ)(p.h,{children:(0,r.tZ)(l.u,{as:i.Fragment,show:b,children:(0,r.tZ)(a.V,{as:"div",className:"modal-Suw4en","data-testid":_,initialFocus:f,onClick:e=>e.stopPropagation(),onClose:t?u():B,onKeyDown:x?e=>{let{code:n}=e;x&&"Escape"===n&&x(e)}:void 0,onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:(0,r.BX)(g.Uv,{children:[(0,r.tZ)(g.sc,{children:(0,r.tZ)(g._n,{})}),(0,r.tZ)(v.Q,{children:(0,r.tZ)(v.l,{className:c()("modalBody-s4SL_V","the-free-press-theme"),fullscreenMobile:o,maxFullscreenMobile:Z,overflow:y,width:w,children:(0,r.tZ)(p.h,{children:(0,r.BX)(m.tu,{paddingTop:d?24:8,children:[!d&&(0,r.tZ)(m.gq,{justifyContent:"end",children:(0,r.tZ)(h.hU,{priority:"quaternary",onClick:B,children:(0,r.tZ)(s.Z,{})})}),n]})})})})]})})})})}},22526:function(e,n,t){t(16584);var r=t(6400);t(30396),(0,r.createContext)({publication:{},pub:{},setPublication:e=>{}}).displayName="PublishContext"},71e3:function(e,n,t){t.d(n,{A:()=>A});var r=t(16584),i=t(94184),l=t.n(i),a=t(30998),o=t.n(a),c=t(89734),d=t.n(c),u=t(55480),s=t(67749),p=t(20888),h=t(95441),m=t(68833),g=t(98422),v=t(71068),f=t(15771),b=t(19081),Z=t(58175),y=t(63651);let _={containerVertical:"containerVertical-L_u6LQ",logoVertical:"logoVertical-p9LsNy",listenLink:"listenLink-UqdzU4"},w=e=>{var n;let{label:t,openInNewTab:i,podcastSettings:a,section:o,sectionUrl:c,setupUrl:d,subscribeUrl:u,trackingSource:w,user:B}=e,{iString:C}=(0,h.M1)(),{isMobile:N}=(0,g.v9)(),I=N?80:160,S=(0,v.oB)({radius:"md",width:I}),X=(null==B?void 0:B.is_subscribed)&&null!==(n=a.paidEpisodeArtUrl)&&void 0!==n?n:a.artUrl;return(0,r.BX)(b.gq,{direction:N?"column":"row",gap:N?12:24,children:[X&&(0,r.tZ)(p.e,{className:l()(S),src:(0,y.zF4)(X,2*I),maxWidth:I,useRetinaSizing:!0,imageIsFixedWidth:!0}),(0,r.BX)(b.tu,{gap:8,children:[(0,r.BX)(b.gq,{alignItems:"center",justifyContent:"space-between",children:[(0,r.tZ)(Z.xv.B1,{as:"a",color:"pub-primary-text",font:"pub-headings",weight:"bold",href:c,rel:"noopener noreferrer",target:"_blank",children:a.title}),d&&(0,r.tZ)(f.zx,{priority:"secondary",size:"sm",href:d,newTab:i,onClick:()=>{(0,m.j)(m.FP.SET_UP_FEED_CLICKED,{section_id:o.id,source:w})},children:C("Set up")})]}),t&&(0,r.BX)(b.gq,{gap:8,alignItems:"center",children:[(0,r.tZ)(x,{label:t}),"free-with-ads"===t&&u&&(0,r.tZ)(Z.xv,{className:_.listenLink,color:"accent",font:"text",size:12,onClick:()=>{(0,m.j)(m.FP.LISTEN_AD_FREE_CLICKED,{section_id:o.id,source:w}),i?window.open(u,"_blank","noopener,noreferrer"):window.location.href=u},children:"Listen ad-free"})]}),(0,r.tZ)(Z.xv.B3,{color:"pub-secondary-text",font:"text",children:a.description}),(0,r.tZ)("div",{children:(0,r.BX)(Z.xv,{alignItems:"center",color:"accent",display:"inline-flex",font:"text",size:14,weight:"medium",gap:8,onClick:()=>{(0,m.j)(m.FP.SEE_ALL_EPISODES_CLICKED,{section_id:o.id,source:w}),i?window.open(c,"_blank","noopener,noreferrer"):window.location.href=c},children:[(0,r.tZ)("span",{children:C("See all episodes")}),(0,r.tZ)(s.Z,{size:14})]})})]})]})},B=e=>{let{label:n,openInNewTab:t,podcastSettings:i,section:a,sectionUrl:o,trackingSource:c}=e,{iString:d}=(0,h.M1)(),u=(0,v.oB)({radius:"md"});return(0,r.BX)(b.tu,{className:_.containerVertical,border:"detail-themed",padding:20,radius:"md",gap:20,children:[(0,r.tZ)(b.gq,{justifyContent:"center",children:i.artUrl&&(0,r.tZ)(p.e,{className:l()(u,_.logoVertical),src:(0,y.zF4)(i.artUrl,440),maxWidth:164,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,r.BX)(b.tu,{gap:12,children:[(0,r.BX)(b.tu,{gap:8,children:[(0,r.tZ)(Z.xv.B1,{as:"a",color:"pub-primary-text",font:"pub-headings",href:o,rel:"noopener noreferrer",target:"_blank",weight:"bold",children:i.title}),n&&(0,r.tZ)(b.gq,{children:(0,r.tZ)(x,{label:n})}),(0,r.tZ)(Z.xv.B3,{color:"pub-secondary-text",font:"text",children:i.description})]}),(0,r.tZ)("div",{children:(0,r.BX)(Z.xv,{display:"inline-flex",alignItems:"center",gap:8,color:"accent",font:"text",size:14,weight:"medium",onClick:()=>{(0,m.j)(m.FP.SEE_ALL_EPISODES_CLICKED,{section_id:a.id,source:c}),t?window.open(o,"_blank","noopener,noreferrer"):window.location.href=o},children:[(0,r.tZ)("span",{children:d("See all episodes")}),(0,r.tZ)(s.Z,{size:14})]})})]})]})},x=e=>{let{label:n}=e;return(0,r.tZ)(b.gq,{bg:"secondary",display:"inline-block",paddingX:6,radius:"sm",children:(0,r.tZ)(Z.xv,{color:"pub-secondary-text",font:"text",size:12,weight:"semibold",lineHeight:20,children:"member-only"===n?"+ Member-only":"free-with-ads"===n?"Free with ads":"Free"})})};var C=t(46234),N=t(30733),I=t(24791),S=t(6070),X=t(60308),k=t(26111),P=t(47929);let F={twoColumnGrid:"twoColumnGrid-pq1MC7",mainColumn:"mainColumn-cft5kf",sideColumn:"sideColumn-FFh4jo"},M=P.b3.podcastsPage,A=e=>{let{idToMagicLink:n,pub:t,user:i}=e,{isMobile:a}=(0,g.v9)(),c=d()((0,I.hK)(t),e=>{var n;return null!==(n=o()(t.navigationBarItems,n=>n.section_id===e.id))&&void 0!==n?n:999}),s=!!(null==i?void 0:i.is_subscribed),p=!s&&!a,h=c.filter(e=>s||!(0,S.QI)({sectionId:e.id})),m=s?[]:c.filter(e=>(0,S.QI)({sectionId:e.id})),v=null==n?void 0:n[t.id];return v||(v=(0,X.tS3)(t,{section:null,noSection:!1,addBase:!0,user:null,startAtSubscribeFlow:!i||!i.is_free_subscribed,params:{utm_source:M}})),(0,r.tZ)(N.N,{columns:p?3:2,paddingTop:a?8:void 0,children:(0,r.BX)(b.hs,{className:l()({[F.twoColumnGrid]:p}),direction:p?"row":"column",gap:p?void 0:40,children:[!s&&(0,r.BX)(b.tu,{alignItems:a?"stretch":"start",className:F.sideColumn,gap:24,paddingLeft:p?32:void 0,children:[(0,r.BX)(b.tu,{gap:a?12:16,children:[(0,r.tZ)(Z.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:"Member-only Shows"}),(0,r.tZ)(C.B,{firehoseFeedUrl:v,pub:t,trackingSource:M,variant:"member-only"})]}),(0,r.tZ)(b.tu,{gap:a?16:24,children:m.map((e,l)=>{let o=(0,u.d_)({pub:t,section:e}),c=(null==n?void 0:n[e.id])||(0,X.tS3)(t,{section:e,noSection:!1,addBase:!0,user:null,startAtSubscribeFlow:!i||!i.is_free_subscribed,params:{utm_source:M}}),d=(0,y.Ucy)(t,{section:e,addBase:!0}),p=(0,S.hx)({sectionId:e.id})?"member-only":"free";return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a?w:B,{label:p,openInNewTab:!0,podcastSettings:o,section:e,sectionUrl:d,setupUrl:s?c:null,trackingSource:M,user:null!=i?i:null}),l!==m.length-1&&a&&(0,r.tZ)(b.gq,{borderBottom:"detail-themed"})]})})})]}),(0,r.BX)(b.tu,{className:F.mainColumn,gap:24,paddingRight:p?32:void 0,children:[(0,r.BX)(b.tu,{gap:a?12:16,children:[(0,r.BX)(Z.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:[t.name," Shows"]}),s&&(0,r.tZ)(C.B,{pub:t,firehoseFeedUrl:v,trackingSource:M})]}),(0,r.tZ)(b.tu,{gap:a?16:24,children:h.map((e,l)=>{let a=(0,u.d_)({pub:t,section:e}),o=(null==n?void 0:n[e.id])||(0,X.tS3)(t,{section:e,noSection:!1,addBase:!0,user:null,startAtSubscribeFlow:!i||!i.is_free_subscribed,params:{utm_source:M}}),c=(0,y.Ucy)(t,{section:e,addBase:!0}),d=(0,S.hx)({sectionId:e.id})?s?"member-only":"free-with-ads":"free";return(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{label:d,openInNewTab:!0,podcastSettings:a,section:e,sectionUrl:c,setupUrl:s?o:null,subscribeUrl:(0,X.W1P)(t,{utm_source:M,simple:!0,next:document.location.href,referring_pub_ids:(0,k.x)("referring_pub_ids"),addBase:!0}),trackingSource:M,user:null!=i?i:null}),l!==h.length-1&&(0,r.tZ)(b.gq,{borderBottom:"detail-themed"})]})})})]})]})})}},12844:function(e,n,t){t.d(n,{k:()=>h,w:()=>s});var r=t(16584),i=t(95441),l=t(15771),a=t(17352),o=t(19081),c=t(38841),d=t(58175),u=t(60308);let s=(e,n)=>{var t;return{logoUrl:e.podcast_art_url||e.logo_url||(0,u.cse)(),mainClickUrl:(0,u.UVC)({pub:e,section:null,addBase:!0}),buttonClickUrl:n,name:e.podcast_title||e.name,description:null!==(t=e.podcast_description||e.hero_text)&&void 0!==t?t:void 0}},p=e=>{let{logoUrl:n,mainClickUrl:t,buttonClickUrl:u,name:s,description:p,showButton:h}=e,{iString:m}=(0,i.M1)();return(0,r.BX)(a.Z,{gap:12,direction:"row",alignItems:"center",padding:12,children:[n&&(0,r.tZ)(c.wk,{size:48,logoUrl:n}),(0,r.BX)(o.sg,{gap:2,flex:"grow",children:[(0,r.tZ)(d.xv.B3,{weight:"semibold",children:(0,r.tZ)(d.hh,{href:t,children:s})}),(0,r.tZ)(d.xv.B4,{color:"secondary",children:p})]}),h&&(0,r.tZ)(l.zx,{priority:"primary",href:u,newTab:!0,children:m("Set up")})]})},h=e=>{let{showButton:n,items:t}=e;return(0,r.tZ)(o.sg,{gap:12,children:t.map(e=>(0,r.tZ)(p,{logoUrl:e.logoUrl,mainClickUrl:e.mainClickUrl,buttonClickUrl:e.buttonClickUrl,name:e.name,description:e.description,showButton:n}))})}},86075:function(e,n,t){t.d(n,{u:()=>m});var r=t(7409),i=t(99282),l=t(98848),a=t(16584),o=t(98661),c=t(71068),d=t(15771);t(17352);var u=t(19081),s=t(58175);let p={size:20,color:"var(--color-fg-secondary)"},h={size:"sm",priority:"secondary-outline"};function m(e){var n,t,{icon:c,title:u,description:s,button:m}=e,Z=(0,l._)(e,["icon","title","description","button"]);return(0,a.BX)(g,(0,i._)((0,r._)({},Z),{children:[c?(n=c)&&(0,o.isValidElement)(n)?(0,o.cloneElement)(n,(0,r._)({},p,n.props)):n:null,(0,a.BX)(b,{children:[(0,a.tZ)(v,{children:u}),s&&(0,a.tZ)(f,{children:s})]}),m?(t=m)&&(0,o.isValidElement)(t)&&t.type===d.zx?(0,o.cloneElement)(t,(0,r._)({},h,t.props)):t:null]}))}function g(e){var{children:n}=e,t=(0,l._)(e,["children"]);return(0,a.tZ)(u.sg,(0,i._)((0,r._)({flex:"grow",alignItems:"center",justifyContent:"center",gap:12,padding:20,textAlign:"center"},t),{children:n}))}function v(e){let{children:n}=e;return(0,a.tZ)(s.xv.B4,{weight:"medium",color:"primary",children:n})}function f(e){let{children:n}=e;return(0,a.tZ)(s.xv.B4,{color:"secondary",children:n})}let b=(0,c.zo)({display:"flex",direction:"column",gap:2,maxWidth:400})},39198:function(e,n,t){t.d(n,{t:()=>o});var r=t(16584),i=t(61254),l=t(19081),a=t(58175);function o(e){let{children:n}=e;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.tu,{paddingY:4,paddingX:8,children:(0,r.tZ)(a.xv.B4,{color:"secondary",children:n})}),(0,r.tZ)(i.iz,{pullX:8})]})}},98591:function(e,n,t){t.d(n,{CX:()=>l}),t(16584);var r=t(98661);t(22526),t(48980);let i=(0,r.createContext)(null);function l(){let e=(0,r.useContext)(i);if(!e)throw Error("usePublishContext must be used within a PublishProvider");return e}},55533:function(e,n,t){t.d(n,{ld:()=>u,vJ:()=>d});var r=t(7409),i=t(99282),l=t(98848),a=t(16584);t(15771);var o=t(19081),c=t(58175);function d(e){var{title:n,body:t,children:c,spacing:d}=e,s=(0,l._)(e,["title","body","children","spacing"]);return(0,a.tZ)(o.tu,(0,i._)((0,r._)({flex:"grow",alignItems:"center",justifyContent:"center",padding:20},s),{children:(0,a.tZ)(u,{title:n,body:t,gap:d,children:c})}))}function u(e){let{title:n,body:t,children:r,gap:i}=e;return(0,a.BX)(o.tu,{gap:12,alignItems:"center",children:[(0,a.BX)(o.tu,{gap:null!=i?i:4,alignItems:"center",children:[(0,a.tZ)(c.xv.B3,{weight:"semibold",color:"primary",align:"center",children:n}),(0,a.tZ)(c.xv.B4,{color:"secondary",align:"center",children:t})]}),r]})}},20521:function(e,n,t){t.d(n,{x:()=>l});var r=t(98012);function i(e){var n;let t=[e.is_primary,(null===(n=e.publication)||void 0===n?void 0:n.author_id)===e.user_id,"admin"===e.role,"contributor"===e.role].map(e=>e?"0":"1").join("");return"".concat(t,"-").concat((0,r.Z)(e.created_at).valueOf())}function l(e){return e.slice(0).sort((e,n)=>i(e)>i(n)?1:-1)}}}]);